# setup a few directories
mkdir /bin
mkdir /lib
mkdir /lib64
mkdir /etc
mkdir /dev
symlink ../lib64 lib/x86_64-linux-gnu

# device files
mknod /dev/console c 5 1

# binary to initialize the system before execing sshd
linux-builder/init /

# sshd program and the invocation after tinyinit has finished
/usr/sbin/sshd
exec /bin/sshd -D -e

etc/passwd /etc
etc/shadow /etc
#etc/services /etc

mkdir /run/sshd 700
mkdir /run/jump

# config, host key and CA cert
etc/sshd_config				/etc/ssh
etc/user_ca.pub				/etc/ssh
build/etc/ssh/ssh_host_rsa_key		/etc/ssh
build/etc/ssh/ssh_host_rsa_key.pub	/etc/ssh
build/etc/ssh/ssh_host_rsa_key-cert.pub	/etc/ssh

# force libnns to be included
/usr/lib/x86_64-linux-gnu/libnss_compat.so.2 /lib64

# fake shell for the jump user
/sbin/nologin

