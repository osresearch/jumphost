# setup a few directories
mkdir /bin
mkdir /lib
mkdir /lib64
mkdir /etc
mkdir /dev
symlink ../lib64 lib/x86_64-linux-gnu

# device files
mknod /dev/console c 5 0

# binary to initialize the system before execing sshd
../build/init /

# Actual ssh tool!
/usr/sbin/sshd
#/usr/bin/ssh

./passwd /etc
./shadow /etc
./services /etc

# config and host key
./sshd_config /etc/ssh
../build/etc/ssh/ssh_host_rsa_key		/etc/ssh
../build/etc/ssh/ssh_host_rsa_key.pub		/etc/ssh
../build/etc/ssh/ssh_host_rsa_key-cert.pub	/etc/ssh
../etc/user_ca.pub				/etc/ssh

# force libnns to be included
/usr/lib/x86_64-linux-gnu/libnss_compat.so.2 /lib64

# fake shell for the jump user
/sbin/nologin

# network syslog support (currently broken)
#./syslog.conf /etc
#../sysklogd/src/syslogd

# core utils (should be removed once init is replaced)
#/bin/bash
#symlink bash bin/sh
#/usr/bin/mount
#/usr/bin/umount
#/usr/bin/chown
#/usr/bin/chmod
#/usr/bin/cp
#/usr/bin/mv
#/usr/bin/cmp
#/usr/bin/ls
#/usr/bin/cat
#/usr/bin/echo
#/usr/bin/head
#/usr/bin/tail
#/usr/bin/mkdir
#/usr/bin/setsid
#/usr/bin/dd
#/usr/bin/dirname
#/usr/bin/strace
#/usr/bin/grep
#/usr/bin/xxd
#/usr/bin/mktemp
#/usr/bin/date
#/usr/bin/printf
#/usr/bin/rm
#/usr/bin/sleep
#/usr/bin/tar
#/usr/bin/cpio
#/usr/bin/gzip

# networking stuff
#/usr/bin/openssl
#/usr/bin/curl
#/usr/bin/ping
#/usr/bin/nc
#/usr/sbin/ifconfig
#/usr/sbin/route
#/usr/bin/efibootmgr

